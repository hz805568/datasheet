C51 COMPILER V9.00   开关量                                                                12/16/2015 13:40:08 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE 开关量
OBJECT MODULE PLACED IN 开关量.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE 开关量.C BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /**************************************************************************************
   2          *功能:开关量信号检测，串口显示（需用串口助手）                                                                                                
   3          *硬件链接:signal-->P3.5(模块的开关量信号DO)                                                                                     
   4          *作者:研发中心                                                                                                                                           
   5          *公司:科睿电子产品有限公司                                                                                                               
   6          *电话:0530-2897239   15192459227                                                                                                          
   7          *地址:菏泽市开发区广州路与淮河路交叉口科睿电子产品有限公司                                                
   8          ***************************************************************************************/
   9          #include <reg52.h>
  10          unsigned char date;
  11          #define uchar unsigned char
  12          #define uint unsigned int
  13          sbit signal=P3^5;
  14          
  15          /* 函数声明 -----------------------------------------------*/
  16          void delay(uint z);
  17          void Initial_com(void);
  18          
  19          //***********************************************************
  20          
  21          /*
  22          ********************************************************************************
  23          ** 函数名称 : delay(uint z)
  24          ** 函数功能 : 延时函数
  25          ********************************************************************************
  26          */
  27          void delay(uint z)
  28          {                                                                                                                                                                                          
  29   1          uint i,j;
  30   1          for(i=z;i>0;i--)
  31   1              for(j=110;j>0;j--);
  32   1      } 
  33          
  34          
  35          //******************************
  36          
  37          //*****串口初始化函数***********
  38          
  39          //******************************
  40          void Initial_com(void)
  41          {
  42   1       EA=1;        //开总中断
  43   1       ES=1;        //允许串口中断
  44   1       ET1=1;        //允许定时器T1的中断
  45   1       TMOD=0x20;   //定时器T1,在方式2中断产生波特率
  46   1       PCON=0x00;   //SMOD=0
  47   1       SCON=0x50;   // 方式1 由定时器控制
  48   1       TH1=0xfd;    //波特率设置为9600
  49   1       TL1=0xfd;
  50   1       TR1=1;       //开定时器T1运行控制位
  51   1      
  52   1      }
  53          
  54          //*************************
  55          //**********主函数*********
C51 COMPILER V9.00   开关量                                                                12/16/2015 13:40:08 PAGE 2   

  56          //*************************
  57          main()
  58          {
  59   1               Initial_com();
  60   1               while(1)
  61   1               {
  62   2              
  63   2                       if(signal==0)
  64   2                      {
  65   3                              delay();          //消抖动
*** WARNING C209 IN LINE 65 OF 开关量.C: '_delay': too few actual parameters
  66   3                              if(signal==0)     //确认触发
  67   3                              {
  68   4                                       SBUF=0X01;
  69   4                                       delay(200);
  70   4                                      
  71   4                              
  72   4                              }
  73   3                 
  74   3                      }
  75   2                       
  76   2                        if(RI)
  77   2                        {
  78   3                              date=SBUF;    //单片机接收
  79   3                              SBUF=date;    //单片机发送
  80   3                              RI=0;
  81   3                        }
  82   2                      
  83   2                      
  84   2                }
  85   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     89    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
